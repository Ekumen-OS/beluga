<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Beluga: /__w/beluga/beluga/src/beluga/beluga/include/beluga/algorithm/estimation.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_200x200.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Beluga
   </div>
   <div id="projectbrief">An extensible particle filter library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_1ad523cfdb7a3d7d09cddf672d6cd478.html">beluga</a></li><li class="navelem"><a class="el" href="dir_634c6b228f937c8a89fa81bc2f240134.html">algorithm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">estimation.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of algorithms that allow calculating the estimated state of a particle filter.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;range/v3/range/access.hpp&gt;</code><br />
<code>#include &lt;range/v3/range/primitives.hpp&gt;</code><br />
<code>#include &lt;range/v3/view/common.hpp&gt;</code><br />
<code>#include &lt;range/v3/view/repeat_n.hpp&gt;</code><br />
<code>#include &lt;range/v3/view/transform.hpp&gt;</code><br />
<code>#include &lt;sophus/se2.hpp&gt;</code><br />
<code>#include &lt;sophus/types.hpp&gt;</code><br />
<code>#include &lt;numeric&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for estimation.hpp:</div>
<div class="dyncontent">
<div class="center"><img src="estimation_8hpp__incl.png" border="0" usemap="#a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2algorithm_2estimation_8hpp" alt=""/></div>
<map name="a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2algorithm_2estimation_8hpp" id="a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2algorithm_2estimation_8hpp">
<area shape="rect" title="Implementation of algorithms that allow calculating the estimated state of a particle filter." alt="" coords="760,5,999,61"/>
<area shape="rect" title=" " alt="" coords="5,117,201,143"/>
<area shape="rect" title=" " alt="" coords="226,117,445,143"/>
<area shape="rect" title=" " alt="" coords="469,117,671,143"/>
<area shape="rect" title=" " alt="" coords="695,109,855,151"/>
<area shape="rect" title=" " alt="" coords="879,117,1090,143"/>
<area shape="rect" title=" " alt="" coords="1114,117,1237,143"/>
<area shape="rect" title=" " alt="" coords="1261,117,1397,143"/>
<area shape="rect" title=" " alt="" coords="1421,117,1495,143"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="estimation_8hpp__dep__incl.png" border="0" usemap="#a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2algorithm_2estimation_8hppdep" alt=""/></div>
<map name="a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2algorithm_2estimation_8hppdep" id="a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2algorithm_2estimation_8hppdep">
<area shape="rect" title="Implementation of algorithms that allow calculating the estimated state of a particle filter." alt="" coords="5,5,244,61"/>
<area shape="rect" href="algorithm_8hpp.html" title="Includes all beluga algorithms." alt="" coords="29,109,221,165"/>
<area shape="rect" href="beluga_8hpp.html" title="Includes all the Beluga API." alt="" coords="29,213,221,269"/>
<area shape="rect" href="amcl__core_8hpp_source.html" title=" " alt="" coords="7,317,243,373"/>
</map>
</div>
</div>
<p><a href="estimation_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adcec94ef6e5c1effabe7cced2982d8ae"><td class="memTemplParams" colspan="2">template&lt;class Range , class WeightsRange , class Scalar &gt; </td></tr>
<tr class="memitem:adcec94ef6e5c1effabe7cced2982d8ae"><td class="memTemplItemLeft" align="right" valign="top">Sophus::Matrix2&lt; Scalar &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="estimation_8hpp.html#adcec94ef6e5c1effabe7cced2982d8ae">beluga::calculate_covariance</a> (Range &amp;&amp;range, WeightsRange &amp;&amp;normalized_weights, const Sophus::Vector2&lt; Scalar &gt; &amp;mean)</td></tr>
<tr class="memdesc:adcec94ef6e5c1effabe7cced2982d8ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the covariance of a range given its mean and the weights of each element.  <a href="estimation_8hpp.html#adcec94ef6e5c1effabe7cced2982d8ae">More...</a><br /></td></tr>
<tr class="separator:adcec94ef6e5c1effabe7cced2982d8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6556fb20721eaea6b5a2d4b86ce603b8"><td class="memTemplParams" colspan="2">template&lt;class Range , class Scalar &gt; </td></tr>
<tr class="memitem:a6556fb20721eaea6b5a2d4b86ce603b8"><td class="memTemplItemLeft" align="right" valign="top">Sophus::Matrix2&lt; Scalar &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="estimation_8hpp.html#a6556fb20721eaea6b5a2d4b86ce603b8">beluga::calculate_covariance</a> (Range &amp;&amp;range, const Sophus::Vector2&lt; Scalar &gt; &amp;mean)</td></tr>
<tr class="separator:a6556fb20721eaea6b5a2d4b86ce603b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f8114604160ec3d3fd272f183f621f3"><td class="memTemplParams" colspan="2">template&lt;class Poses , class Weights , class Pose  = ranges::range_value_t&lt;Poses&gt;, class Scalar  = typename Pose::Scalar, typename  = std::enable_if_t&lt;std::is_same_v&lt;Pose, typename Sophus::SE2&lt;Scalar&gt;&gt;&gt;&gt; </td></tr>
<tr class="memitem:a3f8114604160ec3d3fd272f183f621f3"><td class="memTemplItemLeft" align="right" valign="top">std::pair&lt; Sophus::SE2&lt; Scalar &gt;, Sophus::Matrix3&lt; Scalar &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="estimation_8hpp.html#a3f8114604160ec3d3fd272f183f621f3">beluga::estimate</a> (Poses &amp;&amp;poses, Weights &amp;&amp;weights)</td></tr>
<tr class="memdesc:a3f8114604160ec3d3fd272f183f621f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pair consisting of the estimated mean pose and its covariance.  <a href="estimation_8hpp.html#a3f8114604160ec3d3fd272f183f621f3">More...</a><br /></td></tr>
<tr class="separator:a3f8114604160ec3d3fd272f183f621f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a992598bc475f99f59e5b32b06caf854b"><td class="memTemplParams" colspan="2">template&lt;class Poses , class Pose  = ranges::range_value_t&lt;Poses&gt;, class Scalar  = typename Pose::Scalar, typename  = std::enable_if_t&lt;std::is_same_v&lt;Pose, typename Sophus::SE2&lt;Scalar&gt;&gt;&gt;&gt; </td></tr>
<tr class="memitem:a992598bc475f99f59e5b32b06caf854b"><td class="memTemplItemLeft" align="right" valign="top">std::pair&lt; Sophus::SE2&lt; Scalar &gt;, Sophus::Matrix3&lt; Scalar &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="estimation_8hpp.html#a992598bc475f99f59e5b32b06caf854b">beluga::estimate</a> (Poses &amp;&amp;poses)</td></tr>
<tr class="memdesc:a992598bc475f99f59e5b32b06caf854b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pair consisting of the estimated mean pose and its covariance.  <a href="estimation_8hpp.html#a992598bc475f99f59e5b32b06caf854b">More...</a><br /></td></tr>
<tr class="separator:a992598bc475f99f59e5b32b06caf854b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of algorithms that allow calculating the estimated state of a particle filter. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6556fb20721eaea6b5a2d4b86ce603b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6556fb20721eaea6b5a2d4b86ce603b8">&#9670;&nbsp;</a></span>calculate_covariance() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Range , class Scalar &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Sophus::Matrix2&lt;Scalar&gt; beluga::calculate_covariance </td>
          <td>(</td>
          <td class="paramtype">Range &amp;&amp;&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Sophus::Vector2&lt; Scalar &gt; &amp;&#160;</td>
          <td class="paramname"><em>mean</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convenience overload that calculates the covariance of a range given its mean for the case where all samples have the same weight. </p><dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Range</td><td>A <a href="https://en.cppreference.com/w/cpp/ranges/sized_range">sized range</a> type whose value type is <code>Sophus::Vector2&lt;Scalar&gt;</code>. </td></tr>
    <tr><td class="paramname">Scalar</td><td>A scalar type, e.g. double or float. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">range</td><td>Range to be used to calculate the covariance. </td></tr>
    <tr><td class="paramname">mean</td><td>The previously calculated mean of range. The value must be correct for the resulting covariance to be correct. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated covariance, as a <code>Sophus::Matrix2&lt;Scalar&gt;</code>. </dd></dl>

</div>
</div>
<a id="adcec94ef6e5c1effabe7cced2982d8ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcec94ef6e5c1effabe7cced2982d8ae">&#9670;&nbsp;</a></span>calculate_covariance() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Range , class WeightsRange , class Scalar &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Sophus::Matrix2&lt;Scalar&gt; beluga::calculate_covariance </td>
          <td>(</td>
          <td class="paramtype">Range &amp;&amp;&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WeightsRange &amp;&amp;&#160;</td>
          <td class="paramname"><em>normalized_weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Sophus::Vector2&lt; Scalar &gt; &amp;&#160;</td>
          <td class="paramname"><em>mean</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the covariance of a range given its mean and the weights of each element. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Range</td><td>A <a href="https://en.cppreference.com/w/cpp/ranges/sized_range">sized range</a> type whose value type is <code>Sophus::Vector2&lt;Scalar&gt;</code>. </td></tr>
    <tr><td class="paramname">WeightsRange</td><td>A <a href="https://en.cppreference.com/w/cpp/ranges/sized_range">sized range</a> type whose value type is <code>Scalar</code>. </td></tr>
    <tr><td class="paramname">Scalar</td><td>A scalar type, e.g. double or float. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">range</td><td>Range to be used to calculate the covariance. </td></tr>
    <tr><td class="paramname">normalized_weights</td><td>Range with the normalized (total weight 1.0) weights of the samples in 'range'. </td></tr>
    <tr><td class="paramname">mean</td><td>The previously calculated mean of range. The value must be correct for the resulting covariance to be correct. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated covariance, as a <code>Sophus::Matrix2&lt;Scalar&gt;</code>. </dd></dl>

</div>
</div>
<a id="a992598bc475f99f59e5b32b06caf854b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a992598bc475f99f59e5b32b06caf854b">&#9670;&nbsp;</a></span>estimate() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Poses , class Pose  = ranges::range_value_t&lt;Poses&gt;, class Scalar  = typename Pose::Scalar, typename  = std::enable_if_t&lt;std::is_same_v&lt;Pose, typename Sophus::SE2&lt;Scalar&gt;&gt;&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;Sophus::SE2&lt;Scalar&gt;, Sophus::Matrix3&lt;Scalar&gt; &gt; beluga::estimate </td>
          <td>(</td>
          <td class="paramtype">Poses &amp;&amp;&#160;</td>
          <td class="paramname"><em>poses</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pair consisting of the estimated mean pose and its covariance. </p>
<p>Given a range of poses, computes the estimated pose by averaging the translation and rotation parts, assuming all poses are equally weighted. Computes the covariance matrix of the translation parts and the circular variance of the rotation angles to create a 3x3 covariance matrix. It does not take into account the particle weights.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Poses</td><td>A <a href="https://en.cppreference.com/w/cpp/ranges/sized_range">sized range</a> type whose value type is <code>Sophus::SE2&lt;Scalar&gt;</code>. </td></tr>
    <tr><td class="paramname">Pose</td><td>The pose value type of the given range. </td></tr>
    <tr><td class="paramname">Scalar</td><td>A scalar type, e.g. double or float. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">poses</td><td>Poses of equally weighted 2D poses. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The estimated pose and its 3x3 covariance matrix. </dd></dl>

</div>
</div>
<a id="a3f8114604160ec3d3fd272f183f621f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f8114604160ec3d3fd272f183f621f3">&#9670;&nbsp;</a></span>estimate() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Poses , class Weights , class Pose  = ranges::range_value_t&lt;Poses&gt;, class Scalar  = typename Pose::Scalar, typename  = std::enable_if_t&lt;std::is_same_v&lt;Pose, typename Sophus::SE2&lt;Scalar&gt;&gt;&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;Sophus::SE2&lt;Scalar&gt;, Sophus::Matrix3&lt;Scalar&gt; &gt; beluga::estimate </td>
          <td>(</td>
          <td class="paramtype">Poses &amp;&amp;&#160;</td>
          <td class="paramname"><em>poses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Weights &amp;&amp;&#160;</td>
          <td class="paramname"><em>weights</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pair consisting of the estimated mean pose and its covariance. </p>
<p>Given a range of poses, computes the estimated pose by averaging the translation and rotation parts. Computes the covariance matrix of the translation parts and the circular variance of the rotation angles to create a 3x3 covariance matrix. It does not take into account the particle weights.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Poses</td><td>A <a href="https://en.cppreference.com/w/cpp/ranges/sized_range">sized range</a> type whose value type is <code>Sophus::SE2&lt;Scalar&gt;</code>. </td></tr>
    <tr><td class="paramname">Weights</td><td>A <a href="https://en.cppreference.com/w/cpp/ranges/sized_range">sized range</a> type whose value type is <code>Scalar</code>. </td></tr>
    <tr><td class="paramname">Pose</td><td>The pose value type of the given range. </td></tr>
    <tr><td class="paramname">Scalar</td><td>A scalar type, e.g. double or float. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">poses</td><td>Poses of equally weighted 2D poses. </td></tr>
    <tr><td class="paramname">weights</td><td>Poses of equally weighted 2D poses. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The estimated pose and its 3x3 covariance matrix. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
