<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Beluga: beluga::Amcl&lt; MotionModel, SensorModel, RandomStateGenerator, WeightT, ParticleType, ExecutionPolicy &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_200x200.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Beluga
   </div>
   <div id="projectbrief">An extensible particle filter library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>beluga</b></li><li class="navelem"><a class="el" href="classbeluga_1_1Amcl.html">Amcl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classbeluga_1_1Amcl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">beluga::Amcl&lt; MotionModel, SensorModel, RandomStateGenerator, WeightT, ParticleType, ExecutionPolicy &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of the Adaptive Monte Carlo Localization (AMCL) algorithm.  
 <a href="classbeluga_1_1Amcl.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="amcl__core_8hpp_source.html">amcl_core.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a19f3ea39626c20e063268bb9f9189bb8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbeluga_1_1Amcl.html#a19f3ea39626c20e063268bb9f9189bb8">Amcl</a> (MotionModel motion_model, SensorModel sensor_model, RandomStateGenerator random_state_generator, <a class="el" href="structbeluga_1_1spatial__hash.html">spatial_hasher_type</a> spatial_hasher, const <a class="el" href="structbeluga_1_1AmclParams.html">AmclParams</a> &amp;params=<a class="el" href="structbeluga_1_1AmclParams.html">AmclParams</a>{}, ExecutionPolicy execution_policy=std::execution::seq)</td></tr>
<tr class="memdesc:a19f3ea39626c20e063268bb9f9189bb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a AMCL instance.  <a href="classbeluga_1_1Amcl.html#a19f3ea39626c20e063268bb9f9189bb8">More...</a><br /></td></tr>
<tr class="separator:a19f3ea39626c20e063268bb9f9189bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac65cfb5f38d6148e8e39c57154e752c6"><td class="memItemLeft" align="right" valign="top"><a id="ac65cfb5f38d6148e8e39c57154e752c6"></a>
const auto &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbeluga_1_1Amcl.html#ac65cfb5f38d6148e8e39c57154e752c6">particles</a> () const</td></tr>
<tr class="memdesc:ac65cfb5f38d6148e8e39c57154e752c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a reference to the current set of particles. <br /></td></tr>
<tr class="separator:ac65cfb5f38d6148e8e39c57154e752c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af12150f448229acf81a6a199fdabdafc"><td class="memTemplParams" colspan="2"><a id="af12150f448229acf81a6a199fdabdafc"></a>
template&lt;class Distribution &gt; </td></tr>
<tr class="memitem:af12150f448229acf81a6a199fdabdafc"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classbeluga_1_1Amcl.html#af12150f448229acf81a6a199fdabdafc">initialize</a> (Distribution distribution)</td></tr>
<tr class="memdesc:af12150f448229acf81a6a199fdabdafc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize particles using a custom distribution. <br /></td></tr>
<tr class="separator:af12150f448229acf81a6a199fdabdafc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d3f04b1b165ebc95ecb901e5223c178"><td class="memTemplParams" colspan="2">template&lt;class CovarianceT &gt; </td></tr>
<tr class="memitem:a5d3f04b1b165ebc95ecb901e5223c178"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classbeluga_1_1Amcl.html#a5d3f04b1b165ebc95ecb901e5223c178">initialize</a> (state_type pose, CovarianceT covariance)</td></tr>
<tr class="memdesc:a5d3f04b1b165ebc95ecb901e5223c178"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize particles with a given pose and covariance.  <a href="classbeluga_1_1Amcl.html#a5d3f04b1b165ebc95ecb901e5223c178">More...</a><br /></td></tr>
<tr class="separator:a5d3f04b1b165ebc95ecb901e5223c178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a398c686c890bac9559455a63e1ea6c12"><td class="memItemLeft" align="right" valign="top"><a id="a398c686c890bac9559455a63e1ea6c12"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbeluga_1_1Amcl.html#a398c686c890bac9559455a63e1ea6c12">update_map</a> (map_type map)</td></tr>
<tr class="memdesc:a398c686c890bac9559455a63e1ea6c12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the map used for localization. <br /></td></tr>
<tr class="separator:a398c686c890bac9559455a63e1ea6c12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a087f365c406ac31366aa63a5a34f2e46"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbeluga_1_1Amcl.html#a087f365c406ac31366aa63a5a34f2e46">update</a> (state_type control_action, measurement_type measurement) -&gt; std::optional&lt; estimation_type &gt;</td></tr>
<tr class="memdesc:a087f365c406ac31366aa63a5a34f2e46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update particles based on motion and sensor information.  <a href="classbeluga_1_1Amcl.html#a087f365c406ac31366aa63a5a34f2e46">More...</a><br /></td></tr>
<tr class="separator:a087f365c406ac31366aa63a5a34f2e46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a824e597e97c3841d63b8cb20a42625a4"><td class="memItemLeft" align="right" valign="top"><a id="a824e597e97c3841d63b8cb20a42625a4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbeluga_1_1Amcl.html#a824e597e97c3841d63b8cb20a42625a4">force_update</a> ()</td></tr>
<tr class="memdesc:a824e597e97c3841d63b8cb20a42625a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force a manual update of the particles on the next iteration of the filter. <br /></td></tr>
<tr class="separator:a824e597e97c3841d63b8cb20a42625a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class MotionModel, class SensorModel, class RandomStateGenerator, typename WeightT = beluga::Weight, class ParticleType = std::tuple&lt;typename SensorModel::state_type, WeightT&gt;, class ExecutionPolicy = std::execution::sequenced_policy&gt;<br />
class beluga::Amcl&lt; MotionModel, SensorModel, RandomStateGenerator, WeightT, ParticleType, ExecutionPolicy &gt;</h3>

<p>Implementation of the Adaptive Monte Carlo Localization (AMCL) algorithm. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">MotionModel</td><td>Class representing a motion model. Must satisfy <a class="el" href="MotionModelPage.html">Beluga named requirements: MotionModel</a>. </td></tr>
    <tr><td class="paramname">SensorModel</td><td>Class representing a sensor model. Must satisfy <a class="el" href="SensorModelPage.html">Beluga named requirements: SensorModel</a>. </td></tr>
    <tr><td class="paramname">RandomStateGenerator</td><td>A callable able to produce random states, optionally based on the current particles state. Class 'T' is a valid RandomStateGenerator if given 't' a possibly const instance of 'T' any of the following conditions are true:<ul>
<li>t can be called without arguments returning an instance of 'SensorModel::state_type' representing a random state.</li>
<li>t can be called with &lsquo;const beluga::TupleVector&lt;ParticleType&gt;&amp;&gt; returning a callable that can be called without arguments and return an instance of 'SensorModel::state_type&rsquo;. </li>
</ul>
</td></tr>
    <tr><td class="paramname">WeightT</td><td>Type to represent a weight of a particle. </td></tr>
    <tr><td class="paramname">ParticleType</td><td>Full particle type, containing state, weight and possibly other information . </td></tr>
    <tr><td class="paramname">ExecutionPolicy</td><td>Execution policy for particles processing. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a19f3ea39626c20e063268bb9f9189bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19f3ea39626c20e063268bb9f9189bb8">&#9670;&nbsp;</a></span>Amcl()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class MotionModel , class SensorModel , class RandomStateGenerator , typename WeightT  = beluga::Weight, class ParticleType  = std::tuple&lt;typename SensorModel::state_type, WeightT&gt;, class ExecutionPolicy  = std::execution::sequenced_policy&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbeluga_1_1Amcl.html">beluga::Amcl</a>&lt; MotionModel, SensorModel, RandomStateGenerator, WeightT, ParticleType, ExecutionPolicy &gt;::<a class="el" href="classbeluga_1_1Amcl.html">Amcl</a> </td>
          <td>(</td>
          <td class="paramtype">MotionModel&#160;</td>
          <td class="paramname"><em>motion_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SensorModel&#160;</td>
          <td class="paramname"><em>sensor_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RandomStateGenerator&#160;</td>
          <td class="paramname"><em>random_state_generator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbeluga_1_1spatial__hash.html">spatial_hasher_type</a>&#160;</td>
          <td class="paramname"><em>spatial_hasher</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structbeluga_1_1AmclParams.html">AmclParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em> = <code><a class="el" href="structbeluga_1_1AmclParams.html">AmclParams</a>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ExecutionPolicy&#160;</td>
          <td class="paramname"><em>execution_policy</em> = <code>std::execution::seq</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a AMCL instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motion_model</td><td>Motion model instance. </td></tr>
    <tr><td class="paramname">sensor_model</td><td>Sensor model Instance. </td></tr>
    <tr><td class="paramname">random_state_generator</td><td>A callable able to produce random states, optionally based on the current particles state. </td></tr>
    <tr><td class="paramname">spatial_hasher</td><td>A spatial hasher instance capable of computing a hash out of a particle state. </td></tr>
    <tr><td class="paramname">params</td><td>Parameters for AMCL implementation. </td></tr>
    <tr><td class="paramname">execution_policy</td><td>Policy to use when processing particles. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5d3f04b1b165ebc95ecb901e5223c178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d3f04b1b165ebc95ecb901e5223c178">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class MotionModel , class SensorModel , class RandomStateGenerator , typename WeightT  = beluga::Weight, class ParticleType  = std::tuple&lt;typename SensorModel::state_type, WeightT&gt;, class ExecutionPolicy  = std::execution::sequenced_policy&gt; </div>
<div class="memtemplate">
template&lt;class CovarianceT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classbeluga_1_1Amcl.html">beluga::Amcl</a>&lt; MotionModel, SensorModel, RandomStateGenerator, WeightT, ParticleType, ExecutionPolicy &gt;::initialize </td>
          <td>(</td>
          <td class="paramtype">state_type&#160;</td>
          <td class="paramname"><em>pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CovarianceT&#160;</td>
          <td class="paramname"><em>covariance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize particles with a given pose and covariance. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">CovarianceT</td><td>type representing a covariance, compliant with state_type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>If the provided covariance is invalid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a087f365c406ac31366aa63a5a34f2e46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a087f365c406ac31366aa63a5a34f2e46">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class MotionModel , class SensorModel , class RandomStateGenerator , typename WeightT  = beluga::Weight, class ParticleType  = std::tuple&lt;typename SensorModel::state_type, WeightT&gt;, class ExecutionPolicy  = std::execution::sequenced_policy&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="classbeluga_1_1Amcl.html">beluga::Amcl</a>&lt; MotionModel, SensorModel, RandomStateGenerator, WeightT, ParticleType, ExecutionPolicy &gt;::update </td>
          <td>(</td>
          <td class="paramtype">state_type&#160;</td>
          <td class="paramname"><em>control_action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">measurement_type&#160;</td>
          <td class="paramname"><em>measurement</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; std::optional&lt;estimation_type&gt; </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update particles based on motion and sensor information. </p>
<p>This method performs a particle filter update step using motion and sensor data. It evaluates whether an update is necessary based on the configured update policy and the force_update flag. If an update is required, or if it was forced via <code><a class="el" href="classbeluga_1_1Amcl.html#a824e597e97c3841d63b8cb20a42625a4" title="Force a manual update of the particles on the next iteration of the filter.">force_update()</a></code>, the motion model and sensor model updates are applied to the particles, and the particle weights are adjusted accordingly. Also, according to the configured resampling policy, the particles are resampled to maintain diversity and prevent degeneracy.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">control_action</td><td>Control action. </td></tr>
    <tr><td class="paramname">measurement</td><td>Measurement data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An optional pair containing the estimated pose and covariance after the update, or std::nullopt if no update was performed. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/__w/beluga/beluga/src/beluga/beluga/include/beluga/algorithm/<a class="el" href="amcl__core_8hpp_source.html">amcl_core.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
