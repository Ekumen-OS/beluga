<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Beluga: /__w/beluga/beluga/src/beluga/beluga/include/beluga/views/take_while_kld.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Beluga
   </div>
   <div id="projectbrief">An extensible particle filter library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_1ad523cfdb7a3d7d09cddf672d6cd478.html">beluga</a></li><li class="navelem"><a class="el" href="dir_0ae0216c5b903435324487dd13dfdff9.html">views</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">take_while_kld.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of a take_while_kld range adaptor object.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;unordered_set&gt;</code><br />
<code>#include &lt;<a class="el" href="particle__traits_8hpp_source.html">beluga/type_traits/particle_traits.hpp</a>&gt;</code><br />
<code>#include &lt;range/v3/view/take.hpp&gt;</code><br />
<code>#include &lt;range/v3/view/take_while.hpp&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for take_while_kld.hpp:</div>
<div class="dyncontent">
<div class="center"><img src="take__while__kld_8hpp__incl.png" border="0" usemap="#a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2views_2take__while__kld_8hpp" alt=""/></div>
<map name="a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2views_2take__while__kld_8hpp" id="a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2views_2take__while__kld_8hpp">
<area shape="rect" title="Implementation of a take_while_kld range adaptor object." alt="" coords="207,5,399,76"/>
<area shape="rect" title=" " alt="" coords="5,131,68,158"/>
<area shape="rect" title=" " alt="" coords="93,131,207,158"/>
<area shape="rect" href="particle__traits_8hpp.html" title="Implementation of traits for particle types, see the Particle named requirements." alt="" coords="231,124,375,165"/>
<area shape="rect" title=" " alt="" coords="400,131,575,158"/>
<area shape="rect" title=" " alt="" coords="599,124,746,165"/>
<area shape="rect" href="primitives_8hpp.html" title="Implementation of library primitives to abstract member access." alt="" coords="221,213,385,240"/>
<area shape="rect" href="tuple__traits_8hpp.html" title="Implementation of traits for tuple&#45;like types." alt="" coords="72,288,212,329"/>
<area shape="rect" title=" " alt="" coords="410,213,597,240"/>
<area shape="rect" title=" " alt="" coords="20,377,75,404"/>
<area shape="rect" title=" " alt="" coords="391,377,483,404"/>
<area shape="rect" href="strongly__typed__numeric_8hpp.html" title="Implementation of a strongly typed numeric helper." alt="" coords="474,288,685,329"/>
<area shape="rect" href="forward__like_8hpp_source.html" title=" " alt="" coords="237,288,399,329"/>
<area shape="rect" title=" " alt="" coords="612,377,699,404"/>
<area shape="rect" title=" " alt="" coords="529,377,587,404"/>
<area shape="rect" title=" " alt="" coords="112,377,172,404"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="take__while__kld_8hpp__dep__incl.png" border="0" usemap="#a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2views_2take__while__kld_8hppdep" alt=""/></div>
<map name="a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2views_2take__while__kld_8hppdep" id="a_2____w_2beluga_2beluga_2src_2beluga_2beluga_2include_2beluga_2views_2take__while__kld_8hppdep">
<area shape="rect" title="Implementation of a take_while_kld range adaptor object." alt="" coords="112,5,304,76"/>
<area shape="rect" href="sampling_8hpp.html" title="Implementation of algorithms related to generation, sampling and resampling of particles." alt="" coords="19,124,221,180"/>
<area shape="rect" href="views_8hpp.html" title="Implementation of useful container views." alt="" coords="221,228,413,284"/>
<area shape="rect" href="mixin_8hpp.html" title="Implementation of mixin utilities and extensions." alt="" coords="5,228,197,284"/>
<area shape="rect" href="beluga_8hpp.html" title="Includes all the Beluga API." alt="" coords="221,332,413,388"/>
<area shape="rect" href="localization_8hpp.html" title="Implementation of localization algorithms." alt="" coords="5,332,197,388"/>
</map>
</div>
</div>
<p><a href="take__while__kld_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbeluga_1_1views_1_1detail_1_1take__while__kld__fn.html">beluga::views::detail::take_while_kld_fn</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation detail for a take_while_kld range adaptor object.  <a href="structbeluga_1_1views_1_1detail_1_1take__while__kld__fn.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a33f0063a224fbb53815706d549ccd01d"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="take__while__kld_8hpp.html#a33f0063a224fbb53815706d549ccd01d">beluga::kld_condition</a> (std::size_t min, double epsilon, double z=beluga::detail::kDefaultKldZ)</td></tr>
<tr class="memdesc:a33f0063a224fbb53815706d549ccd01d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a callable object that verifies if the KLD condition is being satisfied.  <a href="take__while__kld_8hpp.html#a33f0063a224fbb53815706d549ccd01d">More...</a><br /></td></tr>
<tr class="separator:a33f0063a224fbb53815706d549ccd01d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a621a10de1375cc6e1e27fe7c9cf4390e"><td class="memItemLeft" align="right" valign="top"><a id="a621a10de1375cc6e1e27fe7c9cf4390e"></a>
constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="take__while__kld_8hpp.html#a621a10de1375cc6e1e27fe7c9cf4390e">beluga::detail::kDefaultKldZ</a> = 3.</td></tr>
<tr class="memdesc:a621a10de1375cc6e1e27fe7c9cf4390e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default upper standard normal quantile, P = 0.999. <br /></td></tr>
<tr class="separator:a621a10de1375cc6e1e27fe7c9cf4390e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a569941bf8794e93ee5b816e851b6f80c"><td class="memItemLeft" align="right" valign="top">constexpr detail::take_while_kld_fn&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="take__while__kld_8hpp.html#a569941bf8794e93ee5b816e851b6f80c">beluga::views::take_while_kld</a></td></tr>
<tr class="separator:a569941bf8794e93ee5b816e851b6f80c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of a take_while_kld range adaptor object. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a33f0063a224fbb53815706d549ccd01d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33f0063a224fbb53815706d549ccd01d">&#9670;&nbsp;</a></span>kld_condition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto beluga::kld_condition </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>z</em> = <code>beluga::detail::kDefaultKldZ</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a callable object that verifies if the KLD condition is being satisfied. </p>
<p>The callable object will compute the minimum number of samples based on a Kullback-Leibler distance epsilon between the maximum likelihood estimate and the true distribution. <br  />
Z is the upper standard normal quantile for P, where P is the probability that the error in the estimated distribution will be less than epsilon.</p>
<p>Here are some examples: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">P   </th><th class="markdownTableHeadNone">Z    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0.900   </td><td class="markdownTableBodyNone">1.28155156327703    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0.950   </td><td class="markdownTableBodyNone">1.64485362793663    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0.990   </td><td class="markdownTableBodyNone">2.32634787735669    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0.999   </td><td class="markdownTableBodyNone">3.09023224677087   </td></tr>
</table>
<p>If the computed value is less than what the min argument specifies, then min will be returned.</p>
<p>See KLD-Sampling: Adaptive Particle Filters <a class="el" href="citelist.html#CITEREF_fox2001adaptivekldsampling">[1]</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">min</td><td>Minimum number of particles that the callable object will return. </td></tr>
    <tr><td class="paramname">epsilon</td><td>Maximum distance epsilon between the maximum likelihood estimate and the true distrubution. </td></tr>
    <tr><td class="paramname">z</td><td>Upper standard normal quantile for the probability that the error in the estimated distribution is less than epsilon. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A callable object with prototype <code>(std::size_t hash) -&gt; bool</code>. <code>hash</code> is the spatial hash of the particle being added. <br  />
 The returned callable object is stateful, tracking the total number of particles and the particle clusters based on the spatial hash. <br  />
 The return value of the callable will be false when the number of particles is more than the minimum and the KLD condition is satisfied, if not it will be true. <br  />
 i.e. A return value of true means that you need to keep sampling to satisfy the condition. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a569941bf8794e93ee5b816e851b6f80c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a569941bf8794e93ee5b816e851b6f80c">&#9670;&nbsp;</a></span>take_while_kld</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr detail::take_while_kld_fn beluga::views::take_while_kld</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a href="https://en.cppreference.com/w/cpp/named_req/RangeAdaptorObject">Range adaptor object</a> that will take elements from a range while the KLD condition is statisfied. The input range should be randomly generated from an existing particle set. This adaptor will return elements until the minimum number of samples based on a Kullback-Leibler distance epsilon is satisfied.</p>
<p>See KLD-Sampling: Adaptive Particle Filters <a class="el" href="citelist.html#CITEREF_fox2001adaptivekldsampling">[1]</a>. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
